/* ============================================
   Neurlyn - Dark Mode Styles
   ============================================ */

/* Dark Mode Variables */
[data-theme="dark"] {
  /* Dark Background Colors */
  --white: #0A0B0D;
  --off-white: #111318;
  --canvas: #0F1114;
  
  /* Inverted Grays */
  --gray-50: #1A1D23;
  --gray-100: #1F2329;
  --gray-200: #2A2F38;
  --gray-300: #3A424F;
  --gray-400: #5A6473;
  --gray-500: #8B95A7;
  --gray-600: #B4BDCC;
  --gray-700: #D1D7E0;
  --gray-800: #E8ECEF;
  --gray-900: #F7F9FA;
  
  /* Dark Mode Sage */
  --sage-50: #1A1F1B;
  --sage-100: #202624;
  --sage-200: #2B3930;
  --sage-300: #3A4D42;
  --sage-400: #4F6757;
  --sage-500: #6C9E83;
  --sage-600: #8BB69D;
  --sage-700: #A9CBB6;
  --sage-800: #C8DDD0;
  --sage-900: #E6EFE9;
  
  /* Dark Mode Accents */
  --warm-100: #1F1A16;
  --warm-200: #2A2319;
  
  /* Adjusted Shadows for Dark Mode */
  --shadow-sm: 0 1px 3px 0 rgb(0 0 0 / 0.2), 0 1px 2px -1px rgb(0 0 0 / 0.2);
  --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.3), 0 2px 4px -2px rgb(0 0 0 / 0.2);
  --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.4), 0 4px 6px -4px rgb(0 0 0 / 0.3);
  --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.5), 0 8px 10px -6px rgb(0 0 0 / 0.3);
  
  /* Border adjustments */
  --border-color: var(--gray-200);
  --border-color-light: var(--gray-100);
  --border-color-dark: var(--gray-300);
}

/* System Preference Detection */
@media (prefers-color-scheme: dark) {
  :root:not([data-theme="light"]) {
    /* Copy dark mode variables here for auto-detection */
    --white: #0A0B0D;
    --off-white: #111318;
    --canvas: #0F1114;
    --gray-50: #1A1D23;
    --gray-100: #1F2329;
    --gray-200: #2A2F38;
    --gray-300: #3A424F;
    --gray-400: #5A6473;
    --gray-500: #8B95A7;
    --gray-600: #B4BDCC;
    --gray-700: #D1D7E0;
    --gray-800: #E8ECEF;
    --gray-900: #F7F9FA;
    --sage-50: #1A1F1B;
    --sage-100: #202624;
    --sage-200: #2B3930;
    --sage-300: #3A4D42;
    --sage-400: #4F6757;
    --sage-500: #6C9E83;
    --sage-600: #8BB69D;
    --sage-700: #A9CBB6;
    --sage-800: #C8DDD0;
    --sage-900: #E6EFE9;
    --warm-100: #1F1A16;
    --warm-200: #2A2319;
    --border-color: var(--gray-200);
  }
}

/* Dark Mode Specific Adjustments */
[data-theme="dark"] body,
@media (prefers-color-scheme: dark) {
  body:not([data-theme="light"]) {
    background: linear-gradient(180deg, var(--canvas) 0%, var(--off-white) 100%);
  }
}

[data-theme="dark"] body::before,
@media (prefers-color-scheme: dark) {
  body:not([data-theme="light"])::before {
    background-image: 
      radial-gradient(circle at 20% 50%, var(--sage-900) 0%, transparent 50%),
      radial-gradient(circle at 80% 80%, var(--warm-200) 0%, transparent 50%),
      radial-gradient(circle at 40% 20%, var(--gray-100) 0%, transparent 50%);
    opacity: 0.05;
  }
}

/* Theme Toggle Button */
.theme-toggle {
  position: fixed;
  top: var(--space-4);
  right: var(--space-4);
  width: 48px;
  height: 48px;
  border-radius: var(--radius-full);
  background: var(--white);
  border: 1px solid var(--border-color);
  box-shadow: var(--shadow-md);
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all var(--transition-base);
  z-index: 1000;
}

.theme-toggle:hover {
  transform: scale(1.05);
  box-shadow: var(--shadow-lg);
}

.theme-toggle:active {
  transform: scale(0.95);
}

.theme-icon-light,
.theme-icon-dark {
  position: absolute;
  color: var(--gray-700);
  transition: opacity var(--transition-base), transform var(--transition-base);
}

.theme-icon-dark {
  opacity: 0;
  transform: rotate(-90deg);
}

[data-theme="dark"] .theme-icon-light {
  opacity: 0;
  transform: rotate(90deg);
}

[data-theme="dark"] .theme-icon-dark {
  opacity: 1;
  transform: rotate(0);
}

/* Dark Mode Card Adjustments */
[data-theme="dark"] .card {
  background: var(--gray-50);
  border-color: var(--gray-200);
}

[data-theme="dark"] .card::before {
  background: linear-gradient(90deg, 
    transparent, 
    var(--sage-600), 
    var(--sage-500), 
    var(--sage-600), 
    transparent
  );
}

/* Dark Mode Button Adjustments */
[data-theme="dark"] .btn-secondary {
  background: var(--gray-100);
  border-color: var(--gray-300);
  color: var(--gray-800);
}

[data-theme="dark"] .btn-secondary:hover {
  background: var(--gray-200);
  border-color: var(--gray-400);
}

/* Dark Mode Progress Bar */
[data-theme="dark"] .progress-bar {
  background: var(--gray-200);
}

/* Dark Mode Mode Options */
[data-theme="dark"] .mode-option {
  background: var(--gray-50);
  border-color: var(--gray-200);
}

[data-theme="dark"] .mode-option:hover {
  border-color: var(--sage-400);
  background: var(--sage-900);
}

[data-theme="dark"] .mode-option.selected {
  background: linear-gradient(135deg, var(--sage-800) 0%, var(--sage-900) 100%);
  border-color: var(--sage-500);
}

/* Dark Mode Results */
[data-theme="dark"] .result-item {
  background: var(--gray-100);
}

[data-theme="dark"] .result-bar {
  background: var(--gray-200);
}

/* Dark Mode Footer */
[data-theme="dark"] .footer {
  border-top-color: var(--gray-200);
  color: var(--gray-600);
}

[data-theme="dark"] .footer-links a {
  color: var(--gray-600);
}

/* Dark Mode Likert Options - Fix white-out issue */
[data-theme="dark"] .likert-option.selected {
  background: linear-gradient(135deg, var(--sage-400) 0%, var(--sage-500) 100%);
  color: var(--gray-900) !important;
  border-color: var(--sage-500);
}

[data-theme="dark"] .likert-option.selected * {
  color: var(--gray-900) !important;
}

/* Smooth Theme Transition */
* {
  transition: background-color var(--transition-slow), 
              border-color var(--transition-slow),
              color var(--transition-slow);
}